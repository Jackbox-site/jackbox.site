(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{2683:function(e,t){e.exports='<div id="controller" class="state-controller controller-content">\n    <div id="prompt" class="prompt text"></div>\n    <div class="error text-danger"></div>\n    <div id="question" class="question">\n        <div id="questionPrompt"></div>\n        <div id="choices"></div>\n    </div>\n    <div class="surveyDone">\n        <span class="doneText"></span>\n    </div>\n</div>'},2684:function(e,t,o){"use strict";(function(e){o.d(t,"a",(function(){return p}));var n=o(22),i=o.n(n),s=o(41),a=o.n(s),l=o(469),r=o(467),h=o(471),c=o(484),d=o(47);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var o=[],n=!0,i=!1,s=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(o.push(a.value),!t||o.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw s}}return o}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m=h.a.extend({bindings:i.a.extend({},h.a.prototype.bindings,{"button:first":i.a.extend({},h.a.prototype.bindings["button:first"],{observe:["text","html","image","champion"],updateMethod:"html",onGet:function(t){var o=u(t,4),n=o[0],i=o[1],s=o[2],l=o[3],r="";if(i?r+=i:n&&(r+=e("<div />").text(n).html()),s||l){var h=new c.a({el:this.$el.find("button:first"),model:new a.a.Model({})});if(h.render(),s&&h.model.set({src:s,title:d.a.htmlUnescape(r)}),l){var m=l.size,p=l.lines,g=l.sketchOptions;h.model.set({width:m.width,height:m.height,lines:p,options:g,title:d.a.htmlUnescape(r)})}r=h.$el.html()}return r}})})}),p=l.a.extend({initialize:function(e){this.choicesList=new r.a({childView:m}),console.log(m.prototype.bindings["button:first"]),l.a.prototype.initialize.apply(this,[e])}})}).call(this,o(17))},2685:function(e,t,o){},2864:function(e,t,o){"use strict";o.r(t),o.d(t,"MainView",(function(){return q}));var n=o(22),i=o.n(n),s=o(466),a=o(41),l=o.n(a),r=(o(192),o(42)),h=o.n(r),c=o(83),d=o(572),u=o(487),m=o(457),p=o(488),g=o(484),f=o(47),w=m.a.extend({defaults:i.a.extend({},u.a.prototype.model.defaults,{textKey:void 0,size:{width:640,height:640},colors:[{hex:"#8014fe"},{hex:"#fe34aa"},{hex:"#ff5114"},{hex:"#1c54ff"},{hex:"#000000"},{hex:"#ffc212"},{hex:"#13ffdb"},{hex:"#00ff97"},{hex:"#d7ff13"}],thicknesses:[2,4],defaultIndex:4,forceName:!1,champion:{},showChampion:!1,nameCharacter:!1,nameMaxLength:45,sketchOptions:{minThickness:2,thicknessFactor:0,smoothingFactor:.9,thicknessSmoothingFactor:0,dotMultiplier:1,tipTaperFactor:1},strings:i.a.extend({},u.a.prototype.model.defaults.strings,{name_modal_text:"Name your champion:",name_modal_confirm:"OK",name_modal_cancel:"Cancel",name_error_empty:"You need to write something!",ERROR_REJECTED_OBJECT:"That's not allowed, enter something else!",ERROR_REJECTED_TEXT:"That's not allowed, enter something else!"})})}),v=d.a.extend({template:i.a.template('\n        <ul class="nav nav-colors">\n            <li class="pull-left button-pad">\n                <button id="undoButton" class="undo button">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 64 64"><image x="12" y="20" width="41" height="39" xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAnCAQAAAA4Y6kNAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfhCAUULQu6tVG/AAACyElEQVRIx62WO2gVQRSGvzOzsfAVO6NIKlELBUkhCRhsNZ2otYKNFhYS7MRC7AUt1EKwkmATLSx9oIabQnwRfCCCSpQghhDUSF73WOzs7Mze2eRK8g+77Lz+Pf95zK5wVq7rXwyKkEMRmgBs4wC97GYLm+hgjmm+M0aDp4wDYPz6fHf+xHsZxgAZ1l9gOcRdptBkm2KYASxgyHyz7s4oyk0ycBMARxipIQvbCIfB7yuagQaKcstZCpsZaoOuaEN0AdYrDCiVawjIft7+B6GivKMfHJ0T3vCTVznGzH8SKsoMR518G1u5kvZHDjpLLcawGlird9jHIkFmrRwbuME6msjqUcJeLtFEEaFBb1tblHEm+IWwka10+VorsUAfz9sNzyNO0UOnp+mkh9PcZ7Gy7l7uymUo5SUD3g5Tsa2P4Wj1rNkJS1POcoX1lJVssS1yT/Aj2HFxGUp5IEBwILiCq2AHr/yeMTqWtnKOQW+jLaujBd18dDvm2bN8eC5EwrOatNvFhFt/sp2ID1KcNVktJRx3qy+3l0TnKM8aW0NpeIiiDMObtg6G895Om0jyHP00UR5n3GY76uojXyyuXz4J3XTzGQu1hPCMUfrcd6EtlFGvPxfOoDzJECzR9y2wL+4LEo21ogH8zvwHk0B22Y9lamIsxFeafDNuibpLfF+8h4leUFibwjSTfDAtG8p++RRKrbcR5pnghQksxPuUyJPxaJ5UaazhE68L4QIJH1bvS3sSNtFg0lYI4v+b1tAA7n8phU75wk/BYIJwSJIkpm7WCxfVBePrg8h7IUU1PPV5Oa9NjInSOU4gqaQV0etTEAQN85IKdWllrKDOytyFhHlZlUwQKoKCXAqKVI8ASfZj8XWkuWI1QUCqglpnJKGkQFaMm4Qdoez0TIrQKyyEV2u7jG04o6QTPQtfaAunRhlZ9DVR3615aeL1/wCc0hAjJXcubgAAAABJRU5ErkJggg=="/></svg>\n                </button>\n            </li>\n            <li class="pull-right button-pad">\n                <button id="chooseMarkerButton" class="chooseMarker button">\n                </button>\n            </li>\n            <li class="pull-right button-pad">\n                <button id="chooseHighlighterButton" class="chooseHighlighter button">\n                </button>\n            </li>\n            <li class="pull-right button-pad">\n                <button aria-label="choose color" id="currentColorButton" class="button currentColorButton">\n                    <div id="currentColor" class="currentColor"></div>\n                </button>\n            </li>\n            <li class="pull-right button-pad">\n                <button aria-label="show champion" id="showChampionButton" class="showChampion button">\n                </button>\n            </li>\n            <li id="color-palette" class="hide">\n            </li>\n        </ul>\n        <div id="colorPaletteRegion" class="colorPaletteRegion">\n    '),events:{"click #currentColorButton":"onPaletteClick","click #showPaletteButton":"onPaletteClick"},triggers:i.a.extend({},d.a.prototype.triggers,{"click #chooseMarkerButton":"choose:marker","click #chooseHighlighterButton":"choose:highlighter"}),bindings:i.a.extend({},d.a.prototype.bindings,{".chooseMarker":{attributes:[{name:"style",observe:"currentColor",onGet:function(e){return"background-color: ".concat(e)}}],classes:{selected:{observe:"highlighter",onGet:function(e){return!e}},white:{observe:"currentColor",onGet:function(e){return"#000000"===e}}}},".chooseHighlighter":{attributes:[{name:"style",observe:"currentColor",onGet:function(e){return"background-color: ".concat(e)}}],classes:{selected:"highlighter",white:{observe:"currentColor",onGet:function(e){return"#000000"===e}}}}})}),b=u.a.extend({model:new w,events:i.a.extend({},u.a.prototype.events,{"click #showChampionButton":"onShowChampion"}),bindings:i.a.extend({},u.a.prototype.bindings,{"#showChampionButton":{observe:"champion",visible:!0,onGet:function(e){return e&&!i.a.isEmpty(e)}}}),initialize:function(e){this.toolbarComponent=this.toolbarComponent||new v({model:new l.a.Model({})}),u.a.prototype.initialize.apply(this,[e])},update:function(){this.model.get("showChampion")&&this.onShowChampion();var e=this.model.get("size").width,t=this.model.get("size").height,o=this.model.get("sketchOptions");if(!i.a.isEmpty(this.model.get("champion"))){var n=this.model.get("champion").lines;this.model.get("champion").name;new p.a(e,t,o).setLines(n);var s=new g.a({model:new l.a.Model({}),el:"#showChampionButton"});s.render(),s.model.set({title:"",lines:n,width:e,height:t,options:o})}this.model.get("forceName")&&this.nameCharacter(),u.a.prototype.update.apply(this)},onRender:function(){this.showChildView("toolbar",this.toolbarComponent),u.a.prototype.onRender.apply(this)},onChildviewSketchpadReady:function(){u.a.prototype.onChildviewSketchpadReady.apply(this),this.onChildviewChooseMarker()},onChildviewChooseMarker:function(){this.sketchpadComponent.setHighlighter(!1),this.toolbarComponent.model.set("highlighter",!1);var e=this.model.get("thicknesses")[0]||2;this.sketchpadComponent.setThickness(e)},onChildviewChooseHighlighter:function(){this.sketchpadComponent.setHighlighter(!0),this.toolbarComponent.model.set("highlighter",!0);var e=this.model.get("thicknesses")[1]||8;this.sketchpadComponent.setThickness(e)},onShowChampion:function(){var e=this;this.naming||(h.a.close(),h.a.fire({html:"",customClass:"worldchamps imageView",onOpen:function(){var t=e.model.get("size").width,o=e.model.get("size").height,n=e.model.get("sketchOptions"),i=e.model.get("champion").lines,s=f.a.htmlUnescape(e.model.get("champion").name);new p.a(t,o,n).setLines(i);var a=new g.a({el:".worldchamps.imageView .swal2-content"});a.render(),a.model.set({title:s,lines:i,width:t,height:o,options:n})}}))},autoSubmit:function(){var e="",t=this.$el.find(".swal2-input");if(this.model.get("nameCharacter")&&t&&(e=this.$el.find(".swal2-input").val()||"",(e=f.a.sanitizeInput(e))&&e.length>0)){h.a.close();var o={name:e,action:"name"};this.model.get("textKey")&&(o.textKey=this.model.get("textKey"),o.val=e),this.triggerMethod("client:message",o)}},nameCharacter:function(){var e=this;if(!this.naming){this.naming=!0;var t=this.model.get("nameMaxLength");h.a.close(),h.a.fire({animation:!1,customClass:"worldchamps nameView",text:this.model.get("strings").name_modal_text,cancelButtonText:this.model.get("strings").name_modal_cancel||"Cancel",confirmButtonText:this.model.get("strings").name_modal_confirm||"OK",input:"text",allowOutsideClick:!1,reverseButtons:!0,inputAttributes:{maxlength:t,autocapitalize:"on",autocorrect:"off",autocomplete:"off"},showCancelButton:!0,inputValidator:function(t){return t?null:e.model.get("strings").name_error_empty}}).then((function(t){if(e.naming=!1,t.value){var o=f.a.sanitizeInput(t.value);if(o){var n={name:o,action:"name"};e.model.get("textKey")&&(n.textKey=e.model.get("textKey"),n.val=o),e.triggerMethod("client:message",n)}}}))}},chooseColor:function(e){this.sketchpadComponent.setColor(e),this.toolbarComponent.model.set("currentColor",e)},onChildviewChildviewButtonName:function(){console.log("[DrawView] onChildviewChildviewButtonName"),this.nameCharacter()},onChildviewButtonSubmit:function(){var e=this.sketchpadComponent.getLines();if(0===e.length&&!this.model.get("allowEmpty"))return c.a.show(Error(this.model.get("strings").drawing_empty)),!1;var t={lines:e,action:"submit"};this.model.get("objectKey")&&(t.objectKey=this.model.get("objectKey"),t.val={lines:e,submit:!0}),this.triggerMethod("client:message",t)},onTextFilterError:function(e){var t=this.model.get("strings").ERROR_REJECTED_TEXT||e.message;c.a.show("error",{customClass:"worldchamps",text:t})}}),y=o(17),C=o.n(y),A=o(31),x=o.n(A),k=o(468),I=o(467),R=o(2683),B=o.n(R),E=m.a.extend({defaults:{choiceId:void 0,prompt:{},questions:[],error:null,classes:[],doneText:{},announcePrompt:!1,strings:{survey_finished:"Thank you for your input. You did your civic duty!"}}}),V=x.a.View.extend({className:"Survey scrollable",template:i.a.template(B.a),model:new E,questionIndex:0,regions:{prompt:"#prompt",questionPrompt:"#questionPrompt",choices:"#choices"},bindings:{".error":"error",".question":{observe:"chosen",visible:function(e){return!e}},".surveyDone":{observe:"chosen",visible:function(e){return console.log("chosen",e),null!==e&&""!==e&&!1!==e}},".doneText":{observe:"strings",updateMethod:"html",onGet:function(e){return e?e.survey_finished:null}},":el":{attributes:[{name:"style",observe:"playerInfo",onGet:function(e){return e&&e.bgColor?"background-color: ".concat(e.bgColor):""}},{name:"class",observe:"classes",onGet:function(e){return e?e.join(" "):""}}]},".choice-button":{attributes:[{name:"style",observe:"playerInfo",onGet:function(e){return e&&e.buttonColor?"background-color:".concat(e.buttonColor):null}}]}},initialize:function(e){this.promptView=this.promptView||new k.a({model:new l.a.Model}),this.questionPromptView=this.questionPromptView||new k.a({model:new l.a.Model}),this.choicesList=this.choicesList||new I.a({action:"choose",collection:new l.a.Collection}),this.selected=[],this.listenTo(this.model,"change",this.update,this)},onBeforeDestroy:function(){"multiple"===this.model.get("type")&&this.onChildviewChildviewButtonSubmit()},update:function(){if(void 0!==this.model.get("choiceId")&&this.model.get("choiceId")===this.choiceId||(this.questionIndex=0,this.model.setUpdate({chosen:!1}),this.choiceId=this.model.get("choiceId")),this.promptView.model.set(this.model.get("prompt")),this.questionIndex>=this.model.get("questions").length)this.model.get("chosen")||this.model.setUpdate({chosen:!0});else{var e=this.model.get("questions")[this.questionIndex];this.questionPromptView.model.set(e.prompt),this.choicesList.collection.set(e.choices)}},onRender:function(){this.showChildView("prompt",this.promptView),this.showChildView("questionPrompt",this.questionPromptView),this.showChildView("choices",this.choicesList),this.stickit()},onAttach:function(){this.update(),c.a.vibrate()},onChildviewChildviewButtonChoose:function(e){var t=this.choicesList.children.findByModel(e),o=e.get("index"),n=(e.get("action"),this.model.get("questions")[this.questionIndex].countGroupName);return C()("button").removeClass("active"),t.$el.addClass("active"),"single"===this.model.get("type")&&e.set("selected",!0),this.selected=[e.get("index")],this.triggerMethod("client:countGroup",{name:n,vote:o}),this.questionIndex++,this.update(),!1}}),L=o(475),M=o(573),T=o.n(M),z=m.a.extend({defaults:i.a.extend({},L.a.prototype.model.defaults,{champion:{},sketchOptions:{minThickness:2,thicknessFactor:0,smoothingFactor:.9,thicknessSmoothingFactor:0,dotMultiplier:1,tipTaperFactor:1},size:{width:640,height:640}})}),O=L.a.extend({model:new z,template:i.a.template('\n        <div id="championRegion"></div>\n        '.concat(T.a)),bindings:i.a.extend({},L.a.prototype.bindings,{"#championRegion":{observe:"champion",visible:!0}}),regions:i.a.extend({},L.a.prototype.regions,{champion:"#championRegion"}),initialize:function(e){this.championComponent=this.championComponent||new g.a({model:new Backbone.Model({})}),L.a.prototype.initialize.apply(this,[e])},onRender:function(){this.showChildView("champion",this.championComponent),L.a.prototype.onRender.apply(this)},update:function(){if(this.model.get("champion")){var e=this.model.get("champion")||{},t=e.size||{width:640,height:640},o=e.sketchOptions||this.model.get("sketchOptions");this.championComponent.model.set({title:e.name,lines:e.lines,width:t.width,height:t.height,options:o})}L.a.prototype.update.apply(this)}}),S=o(2684),K=o(474),G=o(510),U=o.n(G),P=K.a.extend({template:i.a.template("".concat(U.a,'<div class="mech"></div>'))}),q=(o(2685),s.a.extend({sessionModulePrefix:"WorldChampions",getGameLayout:function(e){switch(e){case"Draw":return this.setLayout(b);case"Survey":return this.setLayout(V);case"EnterSingleText":return this.setLayout(O);case"MakeSingleChoice":return this.setLayout(S.a);case"Lobby":return this.setLayout(P);default:return-1}},parseBlob:function(e){return e.classes=e.classes||[],e.playerInfo=e.playerInfo||{},e.playerInfo.classes=e.playerInfo.classes||[],e.playerInfo.avatar&&(e.classes=i.a.union(e.classes,[e.playerInfo.avatar]),e.playerInfo.classes=i.a.union(e.playerInfo.classes,[e.playerInfo.avatar])),e}}))},484:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var n=o(22),i=o.n(n),s=o(41),a=o.n(s),l=o(31),r=o.n(l),h=(o(192),o(488)),c=r.a.View.extend({model:new a.a.Model({}),template:i.a.template("\n        <h1 class='title'>ImageView</h1>\n        <img class='imageData'>\n    "),bindings:{".title":{observe:"title",visible:!0,updateView:!0},".imageData":{attributes:[{name:"src",observe:["src","width","height","lines","options"],onGet:function(e){return e[0]?e[0]:this.setImageFromLines()}}]}},setImageFromLines:function(){var e=this.model.get("width")||640,t=this.model.get("height")||640,o=this.model.get("options"),n=this.model.get("lines")||[];if(!n.length||!o)return"";var i=new h.a(e,t,o);return i.setLines(n),i.canvas.toDataURL("image/png")},onRender:function(){this.stickit()}})}}]);
//# sourceMappingURL=32.8b6ceed7c6bcb05fde37.js.map